(function(){enchant();window.onload=function(){var c,b,a;c=2;b=5;a=new Game(240,320);a.fps=24;a.preload(["images/pad.png","images/ball.png","images/block.png","sound/se1.mp3","sound/se2.mp3"]);a.rootScene.backgroundColor="blue";a.onload=function(){var g,d,m,h,k,f,n,l,j,i,e;f=0;m=[a.assets["sound/se1.mp3"],a.assets["sound/se2.mp3"]];n=new Label("SCORE : "+f);n.font="16px Tahoma";n.color="white";l=[10,5],n.x=l[0],n.y=l[1];a.rootScene.addChild(n);g=new Sprite(16,16);g.image=a.assets["images/ball.png"];j=[0,130],g.x=j[0],g.y=j[1];i=[1.5,2.5],g.dx=i[0],g.dy=i[1];g.speed=c;a.rootScene.addChild(g);h=new Sprite(32,16);h.image=a.assets["images/pad.png"];e=[a.width/2,a.height-40],h.x=e[0],h.y=e[1];a.rootScene.addChild(h);d=[];k=function(){var p,o,t,r,q,s;d=[];for(t=r=0;r<5;t=++r){for(o=q=0;q<7;o=++q){p=new Sprite(24,12);p.image=a.assets["images/block.png"];p.frame=0;s=[o*32+12,t*18+30],p.x=s[0],p.y=s[1];a.rootScene.addChild(p);d.push(p)}}return null};a.rootScene.addEventListener(Event.ENTER_FRAME,function(){var o,r,q,p;q=function(){g.x=g.x+g.dx*g.speed;g.y=g.y+g.dy*g.speed;if((g.x<0)||(g.x>(a.width-g.width))){g.dx=-g.dx}if(g.y<0){g.dy=-g.dy}if(g.y>a.height){a.stop();return alert("スコアは "+f+" 点でした")}};p=function(){var s;s=a.input.analogX/4;if(a.input.left){s=-6}if(a.input.right){s=6}if(isNaN(s)){s=0}h.x=h.x+s;if(h.x<0){h.x=0}if(h.x>(a.width-h.width)){return h.x=a.width-h.width}};r=function(){if(h.intersect(g)){g.dy=-g.dy;g.y=h.y-g.height-1;f+=10;g.speed=g.speed+0.025;if(g.speed>b){g.speed=b}return m[1].play()}};o=function(){var u,s,v,t;for(s=v=0,t=d.length;v<t;s=++v){u=d[s];if(g.intersect(u)){g.dy=-g.dy;u.parentNode.removeChild(u);d.splice(s,1);f+=5;m[0].play();break}}if(d.length<1){return k()}};q();p();r();o();return n.text="SCORE : "+f});k();return window.addEventListener("deviceorientation",(function(o){return a.input.analogX=o.gamma}),false)};return a.start()}}).call(this);